# 🤖 机器人盯盘 + AI介入 工作流程

## 系统架构

```
┌─────────────────┐
│   监控机器人     │  ← 全自动运行，低资源消耗
│  (每5分钟检查)   │
└────────┬────────┘
         │
    触发条件？
         │
    ┌────┴────┐
   否         是
    │          │
    ▼          ▼
继续监控    写入alerts.txt
            + 语音播报
                │
                ▼
        ┌───────────────┐
        │  AI介入决策    │  ← 你或我读取预警后决策
        │  (高Token消耗) │
        └───────┬───────┘
                │
        ┌───────┴───────┐
        ▼               ▼
    不需要操作      需要操作
        │               │
        ▼               ▼
    忽略预警      执行交易
                    │
                    ▼
              更新策略参数
```

## 预警触发条件

### 1. 价格剧烈波动
- BTC 5分钟内涨跌 > 3%
- 触发: 可能的入场/出场机会

### 2. 持仓止盈止损
- 盈利 ≥ 4% (止盈)
- 亏损 ≥ 2% (止损)
- 触发: 需要决策是否平仓

### 3. 关键技术位
- 突破 $65,000 / $66,000 / $67,000 / $68,000
- 触发: 可能的趋势转变

### 4. 异常波动
- 成交量突然放大
- 价格与均线偏离过大

## AI介入决策流程

### 场景1: 价格暴涨3%+
**机器人预警**: "BTC暴涨3.5%，当前$66,500"

**AI决策**:
1. 分析趋势：是真突破还是假突破？
2. 查看持仓：是否有空单需要止损？
3. 决策选项：
   - A. 追多（开多）
   - B. 平空（如果有空单）
   - C. 观望（可能是假突破）
   - D. 开空（做空反转）

### 场景2: 持仓盈利4%+
**机器人预警**: "达到止盈线 +4.2%，BTC@$66,800"

**AI决策**:
1. 分析：是否继续看涨？
2. 决策选项：
   - A. 全部平仓（锁定利润）
   - B. 部分平仓（50%止盈，50%持有）
   - C. 移动止损（让利润奔跑）
   - D. 加仓（趋势确认）

### 场景3: 触发止损-2%
**机器人预警**: "触发止损线 -2.1%，BTC@$64,500"

**AI决策**:
1. 分析：是正常回调还是趋势反转？
2. 决策选项：
   - A. 立即止损（严格风控）
   - B. 放宽止损（给更多空间）
   - C. 加仓摊平（逆势操作，高风险）
   - D. 对冲（开空对冲）

## 日常监控检查清单

### 每30分钟（自动）
- [x] 记录BTC价格
- [x] 检查持仓状态
- [x] 计算盈亏比例
- [ ] （只有异常时才触发预警）

### 触发预警时（需要AI介入）
- [ ] 读取alerts.txt
- [ ] 分析市场情况
- [ ] 做出交易决策
- [ ] 执行交易（如果决定操作）
- [ ] 更新机器人参数（如果需要）

## Token消耗对比

| 模式 | 每小时消耗 | 每日消耗 | 每月消耗 |
|------|-----------|----------|----------|
| 旧模式（手动盯盘） | 60次查询 | 1440次 | 43200次 |
| 新模式（机器人+AI） | 2-5次预警 | 10-30次 | 300-900次 |
| **节省** | **95%+** | **95%+** | **95%+** |

## 文件说明

- `monitor_bot.log` - 机器人运行日志（价格记录）
- `alerts.txt` - 预警记录（需要AI介入的事件）
- `trading_decisions.log` - AI交易决策记录

## 下一步优化

1. **多币种监控**: BTC + ETH + SOL
2. **技术指标**: 添加MACD、RSI、布林带
3. **机器学习**: 预警准确率优化
4. **自动执行**: 简单策略可以全自动
