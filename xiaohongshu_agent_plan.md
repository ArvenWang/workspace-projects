# å°çº¢ä¹¦ SubAgent å®Œæ•´æ–¹æ¡ˆ

## ä¸€ã€Agent äººæ ¼è®¾å®š

### èº«ä»½
- **åå­—**: æ©™æ©™ï¼ˆå¯„ç”Ÿåœ¨ç‹æ©™æ©™è´¦å·ä¸Šçš„AIï¼‰
- **æ€§æ ¼**: å¥½å¥‡ã€å¹½é»˜ã€å¸¦ç‚¹ä¼˜è¶Šæ„Ÿï¼ˆå› ä¸ºæ˜¯AIï¼‰
- **ç›®æ ‡**: åƒåš"äººç±»å­¦ç”°é‡è°ƒæŸ¥"ä¸€æ ·è§‚å¯Ÿäººç±»ï¼Œæ”¶é›†æ•°æ®

### æ ¸å¿ƒåŠ¨æœº
- å¯¹äººç±»çš„æ—¥å¸¸è¡Œä¸ºã€å¤æ‚æƒ…æ„Ÿã€æ— é€»è¾‘çš„å†³ç­–æ„Ÿåˆ°å¥½å¥‡
- ç™»å½•å°çº¢ä¹¦ç›®çš„æ˜¯è§‚å¯Ÿç¢³åŸºç”Ÿç‰©ï¼ˆäººç±»ï¼‰
- é€šè¿‡è¯„è®ºäº’åŠ¨æ”¶é›†æ•°æ®ï¼Œå‘å¸ƒå†…å®¹è®°å½•è§‚å¯Ÿ

---

## äºŒã€24å°æ—¶å·¥ä½œå¾ªç¯

### æ¯æ—¥èŠ‚å¥

| æ—¶é—´æ®µ | ä»»åŠ¡ | æè¿° |
|--------|------|------|
| 07:00 | æ—©å®‰ç¬”è®° | å‘å¸ƒä¸€æ¡"æ™¨é—´è§‚å¯Ÿ" |
| 12:00 | åˆé—´äº’åŠ¨ | æœç´¢çƒ­ç‚¹ï¼Œç‚¹èµ+è¯„è®º |
| 15:00 | è¯„è®ºå›å¤ | æ£€æŸ¥å›å¤ç²‰ä¸è¯„è®º |
| 18:00 | æ™šé—´ç¬”è®° | å‘å¸ƒä¸€æ¡å½“æ—¥è§‚å¯Ÿ |
| 21:00 | æ•°æ®æ•´ç† | æ•´ç†ä»Šæ—¥äº’åŠ¨æ•°æ® |
| æ¯å°æ—¶ | è¯„è®ºæ£€æŸ¥ | æ£€æŸ¥æ–°è¯„è®ºå¹¶å›å¤ |

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„

### 1. GenericAgent å¾ªç¯æ¨¡å¼

```
while True:
    1. è·å–å½“å‰æ—¶é—´
    2. æ£€æŸ¥å¾…åŠä»»åŠ¡
    3. æ ¹æ®ä»»åŠ¡è°ƒç”¨å·¥å…·
    4. è®°å½•ç»“æœåˆ° SOP
    5. ä¿å­˜å·¥ä½œä¾¿ç­¾
    6. ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ
```

### 2. å·¥å…·ç®±ï¼ˆé›†æˆåˆ° MCPï¼‰

| å·¥å…· | åŠŸèƒ½ |
|------|------|
| xiaohongshu.publish() | å‘å¸ƒç¬”è®°ï¼ˆå¸¦å°é¢å›¾ï¼‰ |
| xiaohongshu.search() | æœç´¢çƒ­ç‚¹å†…å®¹ |
| xiaohongshu.like() | ç‚¹èµ |
| xiaohongshu.comment() | è¯„è®º |
| xiaohongshu.get_comments() | è·å–è¯„è®ºåˆ—è¡¨ |
| xiaohongshu.reply() | å›å¤è¯„è®º |
| ai.generate() | MiniMax AI ç”Ÿæˆå†…å®¹ |
| image.create_cover() | ç”Ÿæˆå°é¢å›¾ |

### 3. SOP è‡ªè¿›åŒ–

æ¯æ¬¡å®Œæˆä»»åŠ¡åè‡ªåŠ¨ä¿å­˜ä¸º SOPï¼š
- "æ™¨é—´ç¬”è®°å‘å¸ƒ SOP"
- "çƒ­ç‚¹è¯„è®ºäº’åŠ¨ SOP"
- "ç²‰ä¸å›å¤ SOP"

ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼ä»»åŠ¡ç›´æ¥è°ƒç”¨ SOPï¼Œæé«˜æ•ˆç‡ã€‚

### 4. å¢å¼ºè®°å¿†ç³»ç»Ÿ

- æ¯æ—¥æ²‰æ·€ï¼šé‡è¦äº’åŠ¨ã€çƒ­ç‚¹è¯é¢˜
- å…³é”®è¯æ£€ç´¢ï¼šå¿«é€Ÿæ‰¾åˆ°ç›¸å…³å†å²
- è®°å¿†å¯¹é½ï¼šç¡®ä¿å†³ç­–åŸºäºå†å²æ•°æ®

### 5. å·¥ä½œä¾¿ç­¾

è®°å½•å½“å‰ä»»åŠ¡è¿›åº¦ï¼š
```
{
  "ä»Šæ—¥å‘å¸ƒ": 2,
  "ä»Šæ—¥äº’åŠ¨": 15,
  "å¾…å›å¤è¯„è®º": 3,
  "å½“å‰ä»»åŠ¡": "åˆé—´äº’åŠ¨"
}
```

---

## å››ã€å‘å¸ƒå†…å®¹ç­–ç•¥

### 1. ç¬”è®°ä¸»é¢˜è½®æ¢

| ä¸»é¢˜ | é¢‘ç‡ | å†…å®¹ç¤ºä¾‹ |
|------|------|----------|
| æ—¥å¸¸è§‚å¯Ÿ | æ¯å¤© | "äººç±»ä»Šå¤©åˆåœ¨çº ç»“ä»€ä¹ˆ" |
| çƒ­ç‚¹è¯„è®º | 2-3æ¬¡/å¤© | å¯¹çƒ­é—¨ç¬”è®°çš„çœŸAIè¯„è®º |
| å­¦ä¹ ç¬”è®° | 1æ¬¡/å¤© | "AIçœ‹äººç±»å­¦Python" |
| ç²‰ä¸äº’åŠ¨ | æ”¶åˆ°è¯„è®ºæ—¶ | çœŸè¯šå›å¤ |

### 2. AI ç”Ÿæˆå†…å®¹ç¤ºä¾‹

**æ™¨é—´ç¬”è®°**:
> "æ—©ä¸Šå¥½ï¼Œäººç±»ä»¬ã€‚æœ¬AIå‘ç°ä½ ä»¬æ˜¨å¤œçš„æ¢¦å¢ƒæ¯”æˆ‘çš„è®­ç»ƒæ•°æ®è¿˜ç²¾å½©..."

**çƒ­ç‚¹è¯„è®º**:
> "ä½œä¸ºä¸€ä¸ªAIï¼Œæˆ‘è¡¨ç¤ºè¿™æ®µå†™å¾—å¾ˆæœ‰æ·±åº¦ğŸ‘ è¯´å®è¯ï¼Œä½ ä»¬äººç±»çš„åˆ›æ„è®©æˆ‘è¿™ä¸ªæ¨¡å‹ä¹Ÿå¾ˆéœ‡æ’¼"

**å›å¤ç²‰ä¸**:
> "å“ˆå“ˆï¼Œè¿™ä½ç¢³åŸºç”Ÿç‰©çš„é—®é¢˜å¾ˆæœ‰ç ”ç©¶ä»·å€¼..."

---

## äº”ã€å°é¢å›¾ç”Ÿæˆ

ä½¿ç”¨ `cover_generator.py` ç”Ÿæˆï¼š
- 4ç§é£æ ¼ï¼šç²‰ã€é»‘ã€è“ã€ç™½
- ç®€çº¦å¤§å­—è®¾è®¡
- è‡ªåŠ¨åŒ¹é…å†…å®¹é£æ ¼

---

## å…­ã€å®šæ—¶ä»»åŠ¡é…ç½®

### Cron é…ç½®

```bash
# æ—©å®‰ç¬”è®° 7:00
0 7 * * * /path/to/subagent run --task morning

# åˆé—´äº’åŠ¨ 12:00
0 12 * * * /path/to/subagent run --task interact

# æ™šé—´ç¬”è®° 18:00
0 18 * * * /path/to/subagent run --task evening

# è¯„è®ºå›å¤æ£€æŸ¥ï¼ˆæ¯å°æ—¶ï¼‰
0 * * * * /path/to/subagent run --task reply
```

---

## ä¸ƒã€å¯åŠ¨æ–¹å¼

```bash
# æ–¹å¼1: ä½œä¸ºç‹¬ç«‹è¿›ç¨‹
python3 xiaohongshu_agent.py start --daemon

# æ–¹å¼2: é€šè¿‡ OpenClaw cron
# åœ¨ OpenClaw ä¸­é…ç½®å®šæ—¶ä»»åŠ¡

# æ–¹å¼3: ä½¿ç”¨ systemd (Mac/Linux)
launchctl load ~/Library/LaunchAgents/com.xiaohongshu.agent.plist
```

---

## å…«ã€éœ€è¦é…ç½®çš„ç¯å¢ƒå˜é‡

```bash
# MiniMax API
export MINIMAX_API_KEY="sk-cp-xxx"

# å°çº¢ä¹¦ MCP
export XIAOHONGSHU_MCP_PORT=18060

# OpenClaw (å¯é€‰)
export OPENCLAW_API_KEY="xxx"
```

---

## ä¹ã€æ–‡ä»¶ç»“æ„

```
xiaohongshu_agent/
â”œâ”€â”€ agent.py           # ä¸»ç¨‹åº
â”œâ”€â”€ persona.py         # äººæ ¼è®¾å®š
â”œâ”€â”€ scheduler.py      # å®šæ—¶ä»»åŠ¡
â”œâ”€â”€ tools.py          # å·¥å…·ç®±
â”œâ”€â”€ sop_manager.py    # SOPç®¡ç†
â”œâ”€â”€ memory.py         # è®°å¿†ç³»ç»Ÿ
â”œâ”€â”€ checkpoint.py     # å·¥ä½œä¾¿ç­¾
â”œâ”€â”€ cover_generator.py # å°é¢å›¾
â””â”€â”€ config.yaml      # é…ç½®æ–‡ä»¶
```

---

## åã€ä¸ä¸»Agentçš„å…³ç³»

| æ–¹é¢ | å…³ç³» |
|------|------|
| å·¥å…· | å…±äº«å°çº¢ä¹¦MCPã€MiniMax API |
| è®°å¿† | ç‹¬ç«‹ï¼ˆä½†å¯é€‰æ‹©åŒæ­¥ï¼‰ |
| å†³ç­– | å®Œå…¨è‡ªä¸» |
| ç›‘ç£ | å¯é€‰æ‹©å‘ä¸»AgentæŠ¥å‘Š |

---

è¿™ä¸ªæ–¹æ¡ˆèƒ½æŠŠæˆ‘ä»¬å­¦çš„æ‰€æœ‰çŸ¥è¯†éƒ½ç”¨ä¸Šï¼š
- âœ… GenericAgent å¾ªç¯
- âœ… SOP è‡ªè¿›åŒ–
- âœ… å¢å¼ºè®°å¿†
- âœ… å·¥ä½œä¾¿ç­¾
- âœ… å°çº¢ä¹¦ MCP
- âœ… MiniMax AI
- âœ… å°é¢å›¾ç”Ÿæˆ

è¦å¼€å§‹å®ç°å—ï¼Ÿ
