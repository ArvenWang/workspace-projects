---
name: feishu-notification
description: |
  é£ä¹¦ä¸»åŠ¨æ¶ˆæ¯æ¨é€ - ç”¨äºä¸»åŠ¨å‘æŒ‡å®šç”¨æˆ·æˆ–ç¾¤ç»„å‘é€é£ä¹¦æ¶ˆæ¯ã€‚æ”¯æŒçº¯æ–‡æœ¬ã€Markdownå¡ç‰‡ã€äº¤äº’å¡ç‰‡ç­‰å¤šç§æ¶ˆæ¯æ ¼å¼ã€‚é€‚ç”¨äºäº¤æ˜“æé†’ã€å®šæ—¶æŠ¥å‘Šã€ç³»ç»Ÿå‘Šè­¦ç­‰åœºæ™¯ã€‚
---

# é£ä¹¦ä¸»åŠ¨æ¶ˆæ¯æ¨é€

ä¸»åŠ¨å‘æŒ‡å®šç”¨æˆ·æˆ–ç¾¤ç»„å‘é€é£ä¹¦æ¶ˆæ¯ï¼Œæ— éœ€ç­‰å¾…ç”¨æˆ·å…ˆå‘é€æ¶ˆæ¯ã€‚

## æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| å‘é€æ–‡æœ¬æ¶ˆæ¯ | å‘æŒ‡å®šç”¨æˆ·/ç¾¤ç»„å‘é€çº¯æ–‡æœ¬ |
| å‘é€Markdownå¡ç‰‡ | æ”¯æŒå¯Œæ–‡æœ¬ã€ä»£ç å—ã€è¡¨æ ¼ç­‰æ ¼å¼ |
| å‘é€äº¤äº’å¡ç‰‡ | æ”¯æŒæŒ‰é’®ã€è¡¨å•ç­‰äº¤äº’å…ƒç´  |
| @æåŠç”¨æˆ· | æ”¯æŒåœ¨æ¶ˆæ¯ä¸­@æŒ‡å®šç”¨æˆ· |

## ä½¿ç”¨æ–¹æ³•

### 1. å‘é€ç®€å•æ–‡æœ¬æ¶ˆæ¯

ä½¿ç”¨ `message` å·¥å…·ï¼ŒæŒ‡å®š `channel: feishu` å’Œ `target`ï¼š

```json
{
  "action": "send",
  "channel": "feishu",
  "target": "user:ou_xxxxxxxxxxxxxxxx",
  "message": "äº¤æ˜“æé†’ï¼šBTC/USDT ä»·æ ¼çªç ´ 50,000 USDT"
}
```

### 2. å‘é€ç»™è‡ªå·±ï¼ˆå½“å‰ä¼šè¯ç”¨æˆ·ï¼‰

å¦‚æœä½ çš„é£ä¹¦è´¦å·å·²é…å¯¹ï¼Œå¯ä»¥çœç•¥ `target` è‡ªåŠ¨å‘é€åˆ°å½“å‰ä¼šè¯ï¼š

```json
{
  "action": "send",
  "channel": "feishu",
  "message": "å®šæ—¶æŠ¥å‘Šï¼šä»Šæ—¥äº¤æ˜“ç»Ÿè®¡å·²ç”Ÿæˆ"
}
```

### 3. å‘é€åˆ°ç¾¤ç»„

```json
{
  "action": "send",
  "channel": "feishu",
  "target": "chat:oc_xxxxxxxxxxxxxxxx",
  "message": "å›¢é˜Ÿé€šçŸ¥ï¼šç³»ç»Ÿå°†äºä»Šæ™š22:00è¿›è¡Œç»´æŠ¤"
}
```

### 4. å‘é€Markdownæ ¼å¼æ¶ˆæ¯

```json
{
  "action": "send",
  "channel": "feishu",
  "target": "user:ou_xxxxxxxxxxxxxxxx",
  "message": "**äº¤æ˜“æŠ¥å‘Š**\n\n| å¸ç§ | æ”¶ç›Š | çŠ¶æ€ |\n|------|------|------|\n| BTC | +5.2% | âœ… |\n| ETH | -1.3% | âš ï¸ |"
}
```

### 5. å‘é€å¯Œæ–‡æœ¬å¡ç‰‡ï¼ˆæ¨èï¼‰

ä½¿ç”¨ `renderMode: card` å‘é€æ›´ç¾è§‚çš„å¡ç‰‡æ¶ˆæ¯ï¼š

```json
{
  "action": "send",
  "channel": "feishu",
  "target": "user:ou_xxxxxxxxxxxxxxxx",
  "message": "## ğŸ“Š äº¤æ˜“æé†’\n\n**BTC/USDT**\n- å½“å‰ä»·æ ¼: $50,234\n- 24hæ¶¨å¹…: +3.2%\n- å»ºè®®æ“ä½œ: æŒæœ‰",
  "renderMode": "card"
}
```

## ç›®æ ‡æ ¼å¼

| æ ¼å¼ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|
| ç”¨æˆ·OpenID | `user:ou_d62bc39aafec8dcee9e68c31331e9965` | ä¸ªäººç”¨æˆ· |
| ç”¨æˆ·OpenIDï¼ˆç®€å†™ï¼‰ | `ou_d62bc39aafec8dcee9e68c31331e9965` | è‡ªåŠ¨è¯†åˆ«ä¸ºç”¨æˆ· |
| ç¾¤ç»„ID | `chat:oc_xxxxxxxxxxxxxxxx` | ç¾¤ç»„/é¢‘é“ |
| ç¾¤ç»„IDï¼ˆç®€å†™ï¼‰ | `oc_xxxxxxxxxxxxxxxx` | è‡ªåŠ¨è¯†åˆ«ä¸ºç¾¤ç»„ |

## è·å–ç”¨æˆ·/ç¾¤ç»„ID

### æ–¹æ³•ä¸€ï¼šé€šè¿‡é£ä¹¦ç®¡ç†åå°
1. ç™»å½• [é£ä¹¦ç®¡ç†åå°](https://admin.feishu.cn/)
2. é€šè®¯å½• â†’ æˆå‘˜/ç¾¤ç»„ â†’ æŸ¥çœ‹è¯¦æƒ… â†’ è·å–OpenID

### æ–¹æ³•äºŒï¼šé€šè¿‡æ¶ˆæ¯å›å¤
å½“ç”¨æˆ·å‘ä½ å‘é€æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•å…¶OpenIDã€‚ä½ å¯ä»¥åœ¨å›å¤ä¸­ç›´æ¥ä½¿ç”¨ `target` å‚æ•°ã€‚

## ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### äº¤æ˜“æœºå™¨äººæ¨é€
```python
# åœ¨äº¤æ˜“æœºå™¨äººä¸­é›†æˆ
if price_change > threshold:
    send_feishu_notification(
        target="user:your_open_id",
        message=f"ğŸš¨ {symbol} ä»·æ ¼å¼‚å¸¸æ³¢åŠ¨: {price_change}%"
    )
```

### å®šæ—¶æŠ¥å‘Š
```bash
# åœ¨è„šæœ¬ä¸­ä½¿ç”¨
openclaw message send \
  --channel feishu \
  --target "user:your_open_id" \
  --message "$(cat daily_report.md)"
```

### ç³»ç»Ÿå‘Šè­¦
```json
{
  "action": "send",
  "channel": "feishu",
  "target": "chat:ops_group_id",
  "message": "âš ï¸ **ç³»ç»Ÿå‘Šè­¦**\n\n- æ—¶é—´: 2024-01-15 14:32\n- ç±»å‹: å†…å­˜ä¸è¶³\n- æœåŠ¡å™¨: prod-api-01\n- å½“å‰ä½¿ç”¨ç‡: 92%"
}
```

## é…ç½®è¦æ±‚

ç¡®ä¿ `config.yaml` ä¸­å·²é…ç½®é£ä¹¦ï¼š

```yaml
channels:
  feishu:
    enabled: true
    appId: "cli_xxxxxxxxxxxxxxxx"
    appSecret: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    # å¯é€‰ï¼šå…è®¸æ¥æ”¶æ¶ˆæ¯çš„ç”¨æˆ·
    allowFrom:
      - "ou_d62bc39aafec8dcee9e68c31331e9965"
```

## æ³¨æ„äº‹é¡¹

1. **æƒé™**ï¼šæœºå™¨äººéœ€è¦æœ‰å‘é€æ¶ˆæ¯çš„æƒé™
2. **é¢‘ç‡é™åˆ¶**ï¼šé¿å…çŸ­æ—¶é—´å†…å¤§é‡å‘é€ï¼ˆå»ºè®®é—´éš”è‡³å°‘1ç§’ï¼‰
3. **ç›®æ ‡éªŒè¯**ï¼šç¡®ä¿ `target` æ ¼å¼æ­£ç¡®ï¼Œå¦åˆ™æ¶ˆæ¯å‘é€ä¼šå¤±è´¥
4. **æ¶ˆæ¯é•¿åº¦**ï¼šå•æ¡æ¶ˆæ¯å»ºè®®ä¸è¶…è¿‡ 4000 å­—ç¬¦

## æ•…éšœæ’æŸ¥

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| å‘é€å¤±è´¥ï¼Œæç¤ºæ— æƒé™ | æ£€æŸ¥é£ä¹¦åº”ç”¨æ˜¯å¦æœ‰ `im:message:send` æƒé™ |
| ç”¨æˆ·æ”¶ä¸åˆ°æ¶ˆæ¯ | ç¡®è®¤ç”¨æˆ·OpenIDæ­£ç¡®ï¼Œä¸”ç”¨æˆ·å·²ä¸æœºå™¨äººå»ºç«‹ä¼šè¯ |
| ç¾¤ç»„å‘é€å¤±è´¥ | ç¡®ä¿æœºå™¨äººå·²åŠ å…¥è¯¥ç¾¤ç»„ |
| æ¶ˆæ¯æ ¼å¼é”™ä¹± | ä½¿ç”¨ `renderMode: card` æˆ–è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ |
